<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Square Calendar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Calendar Section -->
        <div class="calendar-section" id="calendarSection">
            <header class="calendar-header">
                <button id="prevMonth" class="nav-btn">◀</button>
                <h2 id="currentMonthYear">2023年 10月</h2>
                <button id="nextMonth" class="nav-btn">▶</button>
            </header>
            <div class="weekdays-grid">
                <div>日</div>
                <div>月</div>
                <div>火</div>
                <div>水</div>
                <div>木</div>
                <div>金</div>
                <div>土</div>
            </div>
            <div class="calendar-grid" id="calendarGrid">
                <!-- Days will be injected via JS -->
            </div>
        </div>

        <!-- Detail Panel (Initially hidden/collapsed) -->
        <div class="detail-panel" id="detailPanel">
            <div class="detail-header">
                <h2 id="selectedDateDisplay">日付を選択してください</h2>
                <button class="close-detail" id="closeDetail">&times;</button>
            </div>

            <div class="detail-content-scroll">
                <!-- Task Section -->
                <div class="section-container task-section">
                    <div class="section-header">
                        <h3>タスク</h3>
                        <button class="add-btn" id="addTaskBtn" title="タスクを追加 (Ctrl+T)">+</button>
                    </div>
                    <div class="task-list" id="taskList">
                        <!-- Tasks go here -->
                        <div class="empty-state">タスクはありません</div>
                    </div>
                </div>

                <!-- Schedule Section -->
                <div class="section-container schedule-section">
                    <div class="section-header">
                        <h3>スケジュール</h3>
                        <button class="add-btn" id="addScheduleBtn" title="予定を追加 (Ctrl+P)">+</button>
                    </div>
                    <div class="timeline-container" id="timelineContainer">
                        <!-- Timeline goes here -->
                        <div class="time-slots">
                            <!-- 00:00 to 23:00 generated by JS -->
                        </div>
                        <div class="events-layer" id="eventsLayer">
                            <!-- Events positioned absolutely -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div class="modal-overlay" id="taskModal">
            <div class="modal">
                <h3>タスクを追加</h3>
                <input type="text" id="taskInput" placeholder="タスクを入力..." autofocus>
                <div class="modal-actions">
                    <button class="cancel-btn" id="cancelTaskBtn">キャンセル</button>
                    <button class="confirm-btn" id="saveTaskBtn">保存</button>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="scheduleModal">
            <div class="modal">
                <h3>予定を追加</h3>
                <input type="text" id="scheduleTitleInput" placeholder="タイトル" autofocus>
                <div class="time-inputs">
                    <label>開始: <input type="time" id="startTimeInput" value="09:00"></label>
                    <label>終了: <input type="time" id="endTimeInput" value="10:00"></label>
                </div>
                <div class="modal-actions">
                    <button class="cancel-btn" id="cancelScheduleBtn">キャンセル</button>
                    <button class="confirm-btn" id="saveScheduleBtn">保存</button>
                </div>
            </div>
        </div>

        <!-- Context Menu -->
        <div class="context-menu" id="contextMenu">
            <button id="ctxEditBtn">編集</button>
            <button id="ctxDeleteBtn" class="delete">削除</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>

</html>
